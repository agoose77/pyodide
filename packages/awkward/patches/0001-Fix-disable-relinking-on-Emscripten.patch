From 6f0b5d7d728282b01cc561b311ab683d632190ab Mon Sep 17 00:00:00 2001
From: Angus Hollands <goosey15@gmail.com>
Date: Sat, 23 Jul 2022 13:40:00 +0100
Subject: [PATCH 1/2] Fix: disable relinking on Emscripten

---
 CMakeLists.txt | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 2c64224f..b301914d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -27,6 +27,9 @@ set(CMAKE_VISIBILITY_INLINES_HIDDEN ON)
 if(APPLE)
   set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
   set(CMAKE_INSTALL_RPATH "@loader_path")
+elseif(EMSCRIPTEN)
+  set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
+  set(CMAKE_BUILD_RPATH_USE_ORIGIN TRUE)
 else()
   set(CMAKE_BUILD_RPATH_USE_ORIGIN TRUE)
 endif()
-- 
2.34.1

